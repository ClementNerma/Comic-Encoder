name: Comic Encoder
version: "1.0.0"
author: Cl√©ment Nerma <clement.nerma@gmail.com>
about: Software for building and extracting comic archives
args:
  - silent:
      global: true
      long: silent
      help: Do not display any message other than errors
      conflicts_with:
        - verbose
        - debug

  - verbose:
      global: true
      long: verbose
      short: v
      help: Display detailed informations
      conflicts_with:
        - silent
        - debug
  
  - debug:
      global: true
      long: debug
      help: Display extremely detailed informations
      conflicts_with:
        - silent
        - verbose

subcommands:
  - encode:
      about: Compile chapter directories into volumes
      args:
        - compile:
            long: compile
            takes_value: true
            help: Compile multiple chapters in single volumes (e.g. --compile=10 to compile 10 chapters per volume)
        - individual:
            long: individual
            help: Compile each chapter in a single volume
        - single:
            long: single
            help: Compile all chapters in a single volume

        - chapters-dir:
            long: chapters-dir
            index: 1
            takes_value: true
            required: true
            help: Path to the directory containing the chapters

        - output:
            long: output
            short: o
            takes_value: true
            help: Path to the directory where the volumes should be put or to the single volume

        - chapters-suffix:
            long: chapters-suffix
            help: Add the start and end chapter at the end of each volume's filename
            requires:
                - compile

        - create-output-dir:
            long: create-output-dir
            help: Creates output directory if it does not exist yet

        - overwrite:
            long: overwrite
            help: Overwrite existing files instead of failing

        - dirs-prefix:
            long: dirs-prefix
            short: d
            takes_value: true
            help: Prefix in the name of the chapter directories

        - extended-image-formats:
            long: extended-image-formats
            short: e
            help: Allow additional image formats that may not be supported by all readers (e.g. TIF / RAW / CR2 / ... files)

        - start-chapter:
            long: start-chapter
            takes_value: true
            help: Start at a specific chapter (ignore every chapter before this one)

        - end-chapter:
            long: end-chapter
            takes_value: true
            help: End at a specific chapter (ignore every chapter after this one)

        - root-chapter:
            long: root-chapter
            short: r
            help: Consider input path as a single chapter directory (don't look at sub-directory chapters)
            conflicts_with:
                - start-chapter
                - end-chapter

        - disable-natural-sorting:
            long: disable-natural-sorting
            short: n
            help: Disable natural sorting (use default UTF-8 sorting, a bit faster but unintuitive)

        - show-chapters-path:
            long: show-chapters-path
            short: p
            help: Show path for each chapter
        
        - display-full-names:
            long: display-full-names
            help: Display full file names (by default names are truncated above 50 characters)

        - compress-losslessly:
            long: compress-losslessly
            help: Compress losslessly (a lot slower, save up about 5% of the final volumes' size)
        
      groups:
        - method:
            required: true
            args:
              - compile
              - individual
              - single

  - decode:
      about: Extract images from an existing comic book
      args:
        - input:
            index: 1
            takes_value: true
            required: true
            help: The comic book to decode

        - output:
            long: output
            short: o
            takes_value: true
            help: Directory where images will be written

        - create-output-dir:
            long: create-output-dir
            help: Creates output directory if it does not exist yet

        - only-extract-images:
            long: only-extract-images
            short: e
            help: Only extract supported image formats

        - extended-image-formats:
            long: extended-image-formats
            short: f
            help: When using '--only-extract-images', extract additional image formats that may not be supported by all readers (e.g. TIF / RAW / CR2 / ... files)
            requires:
                - only-extract-images

        - disable-natural-sorting:
            long: disable-natural-sorting
            short: n
            help: Disable natural sorting (use default UTF-8 sorting, a bit faster but unintuitive)

  - rebuild:
      about: Re-encode a comic (useful for converting PDF comics to CBZ ones for instance)
      args:
        - input:
            index: 1
            takes_value: true
            required: true
            help: The comic to rebuild, or a directory of comics with '--dir'
        
        - output:
            long: output
            short: o
            takes_value: true
            help: Output path for the rebuilt comic
        
        - dir:
            long: dir
            help: Build all comics in the input directory

        - create-output-dir:
            long: create-output-dir
            help: Create output directory if it does not exist yet when using '--dir'
            requires:
                - dir

        - overwrite:
            long: overwrite
            help: Overwrite existing files instead of failing
        
        - temporary-dir:
            long: temporary-dir
            short: t
            takes_value: true
            help: Temporary directory where to extract comic book (default is "__tmp_comic_encoder_extract" in the input directory)

        - only-extract-images:
            long: only-extract-images
            short: e
            help: Only extract supported image formats

        - extended-image-formats:
            long: extended-image-formats
            short: f
            help: When using '--only-extract-images', extract additional image formats that may not be supported by all readers (e.g. TIF / RAW / CR2 / ... files)
            requires:
                - only-extract-images

        - disable-natural-sorting:
            long: disable-natural-sorting
            short: n
            help: Disable natural sorting (use default UTF-8 sorting, a bit faster but unintuitive)

        - compress-losslessly:
            long: compress-losslessly
            help: Compress losslessly (a lot slower, save up about 5% of the final volumes' size)